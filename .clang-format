# 嵌入式C/C++ clang-format配置文件
# 支持C11和C++17标准

# 基础设置
BasedOnStyle: LLVM
Language: Cpp
Standard: c++17
ColumnLimit: 120

# 缩进
IndentWidth: 4
UseTab: Never
IndentCaseLabels: true
IndentPPDirectives: None

# 大括号风格 (Allman style)
BreakBeforeBraces: Allman

# 函数和控制语句
AllowShortFunctionsOnASingleLine: None
AllowShortIfStatementsOnASingleLine: Never
AllowShortLoopsOnASingleLine: false
AllowShortBlocksOnASingleLine: Never

# 函数参数
BinPackParameters: false
BinPackArguments: false
AlignAfterOpenBracket: Align

# 对齐
AlignConsecutiveAssignments: true
AlignConsecutiveMacros: true
AlignConsecutiveBitFields: true
AlignTrailingComments: true
AlignOperands: Align

# 指针和引用 (靠近变量名)
PointerAlignment: Right
ReferenceAlignment: Right

# 空格
SpaceBeforeParens: ControlStatements
SpaceBeforeAssignmentOperators: true
SpacesBeforeTrailingComments: 2
SpaceAfterCStyleCast: false
SpacesInParentheses: false
SpacesInSquareBrackets: false

# 换行
BreakBeforeBinaryOperators: None
BreakBeforeTernaryOperators: true
MaxEmptyLinesToKeep: 2

# Include排序
SortIncludes: true
IncludeBlocks: Regroup
IncludeCategories:
  - Regex:           '^<.*\.h>'     # 系统C头文件
    Priority:        1
  - Regex:           '^<.*>'        # 系统C++头文件
    Priority:        2
  - Regex:           '^".*\.h"'     # 项目头文件
    Priority:        3

# 注释标记
CommentPragmas: '^ (TODO:|FIXME:|NOTE:|BUG:|WARNING:)'

# 其他
ReflowComments: true
FixNamespaceComments: true
BitFieldColonSpacing: Both

# 使用说明：
# - .c文件会被视为C代码，.cpp/.cc文件会被视为C++代码
# - 使用 // clang-format off 和 // clang-format on 禁用特定区域格式化